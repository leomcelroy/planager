/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const t=window.ShadowRoot&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,e=Symbol(),i=new Map;class s{constructor(t,i){if(this._$cssResult$=!0,i!==e)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t}get styleSheet(){let e=i.get(this.cssText);return t&&void 0===e&&(i.set(this.cssText,e=new CSSStyleSheet),e.replaceSync(this.cssText)),e}toString(){return this.cssText}}const r=(t,...i)=>{const r=1===t.length?t[0]:i.reduce(((e,i,s)=>e+(t=>{if(!0===t._$cssResult$)return t.cssText;if("number"==typeof t)return t;throw Error("Value passed to 'css' function must be a 'css' function result: "+t+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+t[s+1]),t[0]);return new s(r,e)},n=(e,i)=>{t?e.adoptedStyleSheets=i.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet)):i.forEach((t=>{const i=document.createElement("style"),s=window.litNonce;void 0!==s&&i.setAttribute("nonce",s),i.textContent=t.cssText,e.appendChild(i)}))},o=t?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let i="";for(const e of t.cssRules)i+=e.cssText;return(t=>new s("string"==typeof t?t:t+"",e))(i)})(t):t
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */;var l;const a=window.trustedTypes,d=a?a.emptyScript:"",c=window.reactiveElementPolyfillSupport,h={toAttribute(t,e){switch(e){case Boolean:t=t?d:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,e){let i=t;switch(e){case Boolean:i=null!==t;break;case Number:i=null===t?null:Number(t);break;case Object:case Array:try{i=JSON.parse(t)}catch(t){i=null}}return i}},p=(t,e)=>e!==t&&(e==e||t==t),u={attribute:!0,type:String,converter:h,reflect:!1,hasChanged:p};class f extends HTMLElement{constructor(){super(),this._$Et=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Ei=null,this.o()}static addInitializer(t){var e;null!==(e=this.l)&&void 0!==e||(this.l=[]),this.l.push(t)}static get observedAttributes(){this.finalize();const t=[];return this.elementProperties.forEach(((e,i)=>{const s=this._$Eh(i,e);void 0!==s&&(this._$Eu.set(s,i),t.push(s))})),t}static createProperty(t,e=u){if(e.state&&(e.attribute=!1),this.finalize(),this.elementProperties.set(t,e),!e.noAccessor&&!this.prototype.hasOwnProperty(t)){const i="symbol"==typeof t?Symbol():"__"+t,s=this.getPropertyDescriptor(t,i,e);void 0!==s&&Object.defineProperty(this.prototype,t,s)}}static getPropertyDescriptor(t,e,i){return{get(){return this[e]},set(s){const r=this[t];this[e]=s,this.requestUpdate(t,r,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)||u}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const t=Object.getPrototypeOf(this);if(t.finalize(),this.elementProperties=new Map(t.elementProperties),this._$Eu=new Map,this.hasOwnProperty("properties")){const t=this.properties,e=[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)];for(const i of e)this.createProperty(i,t[i])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(t){const e=[];if(Array.isArray(t)){const i=new Set(t.flat(1/0).reverse());for(const t of i)e.unshift(o(t))}else void 0!==t&&e.push(o(t));return e}static _$Eh(t,e){const i=e.attribute;return!1===i?void 0:"string"==typeof i?i:"string"==typeof t?t.toLowerCase():void 0}o(){var t;this._$Ep=new Promise((t=>this.enableUpdating=t)),this._$AL=new Map,this._$Em(),this.requestUpdate(),null===(t=this.constructor.l)||void 0===t||t.forEach((t=>t(this)))}addController(t){var e,i;(null!==(e=this._$Eg)&&void 0!==e?e:this._$Eg=[]).push(t),void 0!==this.renderRoot&&this.isConnected&&(null===(i=t.hostConnected)||void 0===i||i.call(t))}removeController(t){var e;null===(e=this._$Eg)||void 0===e||e.splice(this._$Eg.indexOf(t)>>>0,1)}_$Em(){this.constructor.elementProperties.forEach(((t,e)=>{this.hasOwnProperty(e)&&(this._$Et.set(e,this[e]),delete this[e])}))}createRenderRoot(){var t;const e=null!==(t=this.shadowRoot)&&void 0!==t?t:this.attachShadow(this.constructor.shadowRootOptions);return n(e,this.constructor.elementStyles),e}connectedCallback(){var t;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(t=this._$Eg)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostConnected)||void 0===e?void 0:e.call(t)}))}enableUpdating(t){}disconnectedCallback(){var t;null===(t=this._$Eg)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostDisconnected)||void 0===e?void 0:e.call(t)}))}attributeChangedCallback(t,e,i){this._$AK(t,i)}_$ES(t,e,i=u){var s,r;const n=this.constructor._$Eh(t,i);if(void 0!==n&&!0===i.reflect){const o=(null!==(r=null===(s=i.converter)||void 0===s?void 0:s.toAttribute)&&void 0!==r?r:h.toAttribute)(e,i.type);this._$Ei=t,null==o?this.removeAttribute(n):this.setAttribute(n,o),this._$Ei=null}}_$AK(t,e){var i,s,r;const n=this.constructor,o=n._$Eu.get(t);if(void 0!==o&&this._$Ei!==o){const t=n.getPropertyOptions(o),l=t.converter,a=null!==(r=null!==(s=null===(i=l)||void 0===i?void 0:i.fromAttribute)&&void 0!==s?s:"function"==typeof l?l:null)&&void 0!==r?r:h.fromAttribute;this._$Ei=o,this[o]=a(e,t.type),this._$Ei=null}}requestUpdate(t,e,i){let s=!0;void 0!==t&&(((i=i||this.constructor.getPropertyOptions(t)).hasChanged||p)(this[t],e)?(this._$AL.has(t)||this._$AL.set(t,e),!0===i.reflect&&this._$Ei!==t&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(t,i))):s=!1),!this.isUpdatePending&&s&&(this._$Ep=this._$E_())}async _$E_(){this.isUpdatePending=!0;try{await this._$Ep}catch(t){Promise.reject(t)}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var t;if(!this.isUpdatePending)return;this.hasUpdated,this._$Et&&(this._$Et.forEach(((t,e)=>this[e]=t)),this._$Et=void 0);let e=!1;const i=this._$AL;try{e=this.shouldUpdate(i),e?(this.willUpdate(i),null===(t=this._$Eg)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostUpdate)||void 0===e?void 0:e.call(t)})),this.update(i)):this._$EU()}catch(t){throw e=!1,this._$EU(),t}e&&this._$AE(i)}willUpdate(t){}_$AE(t){var e;null===(e=this._$Eg)||void 0===e||e.forEach((t=>{var e;return null===(e=t.hostUpdated)||void 0===e?void 0:e.call(t)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$Ep}shouldUpdate(t){return!0}update(t){void 0!==this._$EC&&(this._$EC.forEach(((t,e)=>this._$ES(e,this[e],t))),this._$EC=void 0),this._$EU()}updated(t){}firstUpdated(t){}}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
var v;f.finalized=!0,f.elementProperties=new Map,f.elementStyles=[],f.shadowRootOptions={mode:"open"},null==c||c({ReactiveElement:f}),(null!==(l=globalThis.reactiveElementVersions)&&void 0!==l?l:globalThis.reactiveElementVersions=[]).push("1.3.2");const g=globalThis.trustedTypes,m=g?g.createPolicy("lit-html",{createHTML:t=>t}):void 0,y=`lit$${(Math.random()+"").slice(9)}$`,$="?"+y,b=`<${$}>`,_=document,A=(t="")=>_.createComment(t),w=t=>null===t||"object"!=typeof t&&"function"!=typeof t,C=Array.isArray,E=t=>{var e;return C(t)||"function"==typeof(null===(e=t)||void 0===e?void 0:e[Symbol.iterator])},k=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,P=/-->/g,x=/>/g,S=/>|[ 	\n\r](?:([^\s"'>=/]+)([ 	\n\r]*=[ 	\n\r]*(?:[^ 	\n\r"'`<>=]|("|')|))|$)/g,O=/'/g,U=/"/g,T=/^(?:script|style|textarea|title)$/i,L=(t=>(e,...i)=>({_$litType$:t,strings:e,values:i}))(1),M=Symbol.for("lit-noChange"),N=Symbol.for("lit-nothing"),z=new WeakMap,H=_.createTreeWalker(_,129,null,!1),D=(t,e)=>{const i=t.length-1,s=[];let r,n=2===e?"<svg>":"",o=k;for(let e=0;e<i;e++){const i=t[e];let l,a,d=-1,c=0;for(;c<i.length&&(o.lastIndex=c,a=o.exec(i),null!==a);)c=o.lastIndex,o===k?"!--"===a[1]?o=P:void 0!==a[1]?o=x:void 0!==a[2]?(T.test(a[2])&&(r=RegExp("</"+a[2],"g")),o=S):void 0!==a[3]&&(o=S):o===S?">"===a[0]?(o=null!=r?r:k,d=-1):void 0===a[1]?d=-2:(d=o.lastIndex-a[2].length,l=a[1],o=void 0===a[3]?S:'"'===a[3]?U:O):o===U||o===O?o=S:o===P||o===x?o=k:(o=S,r=void 0);const h=o===S&&t[e+1].startsWith("/>")?" ":"";n+=o===k?i+b:d>=0?(s.push(l),i.slice(0,d)+"$lit$"+i.slice(d)+y+h):i+y+(-2===d?(s.push(void 0),e):h)}const l=n+(t[i]||"<?>")+(2===e?"</svg>":"");if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return[void 0!==m?m.createHTML(l):l,s]};class R{constructor({strings:t,_$litType$:e},i){let s;this.parts=[];let r=0,n=0;const o=t.length-1,l=this.parts,[a,d]=D(t,e);if(this.el=R.createElement(a,i),H.currentNode=this.el.content,2===e){const t=this.el.content,e=t.firstChild;e.remove(),t.append(...e.childNodes)}for(;null!==(s=H.nextNode())&&l.length<o;){if(1===s.nodeType){if(s.hasAttributes()){const t=[];for(const e of s.getAttributeNames())if(e.endsWith("$lit$")||e.startsWith(y)){const i=d[n++];if(t.push(e),void 0!==i){const t=s.getAttribute(i.toLowerCase()+"$lit$").split(y),e=/([.?@])?(.*)/.exec(i);l.push({type:1,index:r,name:e[2],strings:t,ctor:"."===e[1]?F:"?"===e[1]?K:"@"===e[1]?W:V})}else l.push({type:6,index:r})}for(const e of t)s.removeAttribute(e)}if(T.test(s.tagName)){const t=s.textContent.split(y),e=t.length-1;if(e>0){s.textContent=g?g.emptyScript:"";for(let i=0;i<e;i++)s.append(t[i],A()),H.nextNode(),l.push({type:2,index:++r});s.append(t[e],A())}}}else if(8===s.nodeType)if(s.data===$)l.push({type:2,index:r});else{let t=-1;for(;-1!==(t=s.data.indexOf(y,t+1));)l.push({type:7,index:r}),t+=y.length-1}r++}}static createElement(t,e){const i=_.createElement("template");return i.innerHTML=t,i}}function j(t,e,i=t,s){var r,n,o,l;if(e===M)return e;let a=void 0!==s?null===(r=i._$Cl)||void 0===r?void 0:r[s]:i._$Cu;const d=w(e)?void 0:e._$litDirective$;return(null==a?void 0:a.constructor)!==d&&(null===(n=null==a?void 0:a._$AO)||void 0===n||n.call(a,!1),void 0===d?a=void 0:(a=new d(t),a._$AT(t,i,s)),void 0!==s?(null!==(o=(l=i)._$Cl)&&void 0!==o?o:l._$Cl=[])[s]=a:i._$Cu=a),void 0!==a&&(e=j(t,a._$AS(t,e.values),a,s)),e}class I{constructor(t,e){this.v=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}p(t){var e;const{el:{content:i},parts:s}=this._$AD,r=(null!==(e=null==t?void 0:t.creationScope)&&void 0!==e?e:_).importNode(i,!0);H.currentNode=r;let n=H.nextNode(),o=0,l=0,a=s[0];for(;void 0!==a;){if(o===a.index){let e;2===a.type?e=new B(n,n.nextSibling,this,t):1===a.type?e=new a.ctor(n,a.name,a.strings,this,t):6===a.type&&(e=new X(n,this,t)),this.v.push(e),a=s[++l]}o!==(null==a?void 0:a.index)&&(n=H.nextNode(),o++)}return r}m(t){let e=0;for(const i of this.v)void 0!==i&&(void 0!==i.strings?(i._$AI(t,i,e),e+=i.strings.length-2):i._$AI(t[e])),e++}}class B{constructor(t,e,i,s){var r;this.type=2,this._$AH=N,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=i,this.options=s,this._$Cg=null===(r=null==s?void 0:s.isConnected)||void 0===r||r}get _$AU(){var t,e;return null!==(e=null===(t=this._$AM)||void 0===t?void 0:t._$AU)&&void 0!==e?e:this._$Cg}get parentNode(){let t=this._$AA.parentNode;const e=this._$AM;return void 0!==e&&11===t.nodeType&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=j(this,t,e),w(t)?t===N||null==t||""===t?(this._$AH!==N&&this._$AR(),this._$AH=N):t!==this._$AH&&t!==M&&this.$(t):void 0!==t._$litType$?this.T(t):void 0!==t.nodeType?this.k(t):E(t)?this.S(t):this.$(t)}M(t,e=this._$AB){return this._$AA.parentNode.insertBefore(t,e)}k(t){this._$AH!==t&&(this._$AR(),this._$AH=this.M(t))}$(t){this._$AH!==N&&w(this._$AH)?this._$AA.nextSibling.data=t:this.k(_.createTextNode(t)),this._$AH=t}T(t){var e;const{values:i,_$litType$:s}=t,r="number"==typeof s?this._$AC(t):(void 0===s.el&&(s.el=R.createElement(s.h,this.options)),s);if((null===(e=this._$AH)||void 0===e?void 0:e._$AD)===r)this._$AH.m(i);else{const t=new I(r,this),e=t.p(this.options);t.m(i),this.k(e),this._$AH=t}}_$AC(t){let e=z.get(t.strings);return void 0===e&&z.set(t.strings,e=new R(t)),e}S(t){C(this._$AH)||(this._$AH=[],this._$AR());const e=this._$AH;let i,s=0;for(const r of t)s===e.length?e.push(i=new B(this.M(A()),this.M(A()),this,this.options)):i=e[s],i._$AI(r),s++;s<e.length&&(this._$AR(i&&i._$AB.nextSibling,s),e.length=s)}_$AR(t=this._$AA.nextSibling,e){var i;for(null===(i=this._$AP)||void 0===i||i.call(this,!1,!0,e);t&&t!==this._$AB;){const e=t.nextSibling;t.remove(),t=e}}setConnected(t){var e;void 0===this._$AM&&(this._$Cg=t,null===(e=this._$AP)||void 0===e||e.call(this,t))}}class V{constructor(t,e,i,s,r){this.type=1,this._$AH=N,this._$AN=void 0,this.element=t,this.name=e,this._$AM=s,this.options=r,i.length>2||""!==i[0]||""!==i[1]?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=N}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(t,e=this,i,s){const r=this.strings;let n=!1;if(void 0===r)t=j(this,t,e,0),n=!w(t)||t!==this._$AH&&t!==M,n&&(this._$AH=t);else{const s=t;let o,l;for(t=r[0],o=0;o<r.length-1;o++)l=j(this,s[i+o],e,o),l===M&&(l=this._$AH[o]),n||(n=!w(l)||l!==this._$AH[o]),l===N?t=N:t!==N&&(t+=(null!=l?l:"")+r[o+1]),this._$AH[o]=l}n&&!s&&this.C(t)}C(t){t===N?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=t?t:"")}}class F extends V{constructor(){super(...arguments),this.type=3}C(t){this.element[this.name]=t===N?void 0:t}}const q=g?g.emptyScript:"";class K extends V{constructor(){super(...arguments),this.type=4}C(t){t&&t!==N?this.element.setAttribute(this.name,q):this.element.removeAttribute(this.name)}}class W extends V{constructor(t,e,i,s,r){super(t,e,i,s,r),this.type=5}_$AI(t,e=this){var i;if((t=null!==(i=j(this,t,e,0))&&void 0!==i?i:N)===M)return;const s=this._$AH,r=t===N&&s!==N||t.capture!==s.capture||t.once!==s.once||t.passive!==s.passive,n=t!==N&&(s===N||r);r&&this.element.removeEventListener(this.name,this,s),n&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var e,i;"function"==typeof this._$AH?this._$AH.call(null!==(i=null===(e=this.options)||void 0===e?void 0:e.host)&&void 0!==i?i:this.element,t):this._$AH.handleEvent(t)}}class X{constructor(t,e,i){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(t){j(this,t)}}const Y={L:"$lit$",P:y,V:$,I:1,N:D,R:I,j:E,D:j,H:B,F:V,O:K,W,B:F,Z:X},J=window.litHtmlPolyfillSupport;
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
var Z,G;null==J||J(R,B),(null!==(v=globalThis.litHtmlVersions)&&void 0!==v?v:globalThis.litHtmlVersions=[]).push("2.2.3");class Q extends f{constructor(){super(...arguments),this.renderOptions={host:this},this._$Dt=void 0}createRenderRoot(){var t,e;const i=super.createRenderRoot();return null!==(t=(e=this.renderOptions).renderBefore)&&void 0!==t||(e.renderBefore=i.firstChild),i}update(t){const e=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Dt=((t,e,i)=>{var s,r;const n=null!==(s=null==i?void 0:i.renderBefore)&&void 0!==s?s:e;let o=n._$litPart$;if(void 0===o){const t=null!==(r=null==i?void 0:i.renderBefore)&&void 0!==r?r:null;n._$litPart$=o=new B(e.insertBefore(A(),t),t,void 0,null!=i?i:{})}return o._$AI(t),o})(e,this.renderRoot,this.renderOptions)}connectedCallback(){var t;super.connectedCallback(),null===(t=this._$Dt)||void 0===t||t.setConnected(!0)}disconnectedCallback(){var t;super.disconnectedCallback(),null===(t=this._$Dt)||void 0===t||t.setConnected(!1)}render(){return M}}Q.finalized=!0,Q._$litElement$=!0,null===(Z=globalThis.litElementHydrateSupport)||void 0===Z||Z.call(globalThis,{LitElement:Q});const tt=globalThis.litElementPolyfillSupport;null==tt||tt({LitElement:Q}),(null!==(G=globalThis.litElementVersions)&&void 0!==G?G:globalThis.litElementVersions=[]).push("3.2.0");
/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const{H:et}=Y,it=()=>document.createComment(""),st=(t,e,i)=>{var s;const r=t._$AA.parentNode,n=void 0===e?t._$AB:e._$AA;if(void 0===i){const e=r.insertBefore(it(),n),s=r.insertBefore(it(),n);i=new et(e,s,t,t.options)}else{const e=i._$AB.nextSibling,o=i._$AM,l=o!==t;if(l){let e;null===(s=i._$AQ)||void 0===s||s.call(i,t),i._$AM=t,void 0!==i._$AP&&(e=t._$AU)!==o._$AU&&i._$AP(e)}if(e!==n||l){let t=i._$AA;for(;t!==e;){const e=t.nextSibling;r.insertBefore(t,n),t=e}}}return i},rt=(t,e,i=t)=>(t._$AI(e,i),t),nt={},ot=t=>{var e;null===(e=t._$AP)||void 0===e||e.call(t,!1,!0);let i=t._$AA;const s=t._$AB.nextSibling;for(;i!==s;){const t=i.nextSibling;i.remove(),i=t}},lt=1,at=2,dt=t=>(...e)=>({_$litDirective$:t,values:e});
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */class ct{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,e,i){this._$Ct=t,this._$AM=e,this._$Ci=i}_$AS(t,e){return this.update(t,e)}update(t,e){return this.render(...e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ht=(t,e)=>{var i,s;const r=t._$AN;if(void 0===r)return!1;for(const t of r)null===(s=(i=t)._$AO)||void 0===s||s.call(i,e,!1),ht(t,e);return!0},pt=t=>{let e,i;do{if(void 0===(e=t._$AM))break;i=e._$AN,i.delete(t),t=e}while(0===(null==i?void 0:i.size))},ut=t=>{for(let e;e=t._$AM;t=e){let i=e._$AN;if(void 0===i)e._$AN=i=new Set;else if(i.has(t))break;i.add(t),gt(e)}};function ft(t){void 0!==this._$AN?(pt(this),this._$AM=t,ut(this)):this._$AM=t}function vt(t,e=!1,i=0){const s=this._$AH,r=this._$AN;if(void 0!==r&&0!==r.size)if(e)if(Array.isArray(s))for(let t=i;t<s.length;t++)ht(s[t],!1),pt(s[t]);else null!=s&&(ht(s,!1),pt(s));else ht(this,t)}const gt=t=>{var e,i,s,r;t.type==at&&(null!==(e=(s=t)._$AP)&&void 0!==e||(s._$AP=vt),null!==(i=(r=t)._$AQ)&&void 0!==i||(r._$AQ=ft))};class mt extends ct{constructor(){super(...arguments),this._$AN=void 0}_$AT(t,e,i){super._$AT(t,e,i),ut(this),this.isConnected=t._$AU}_$AO(t,e=!0){var i,s;t!==this.isConnected&&(this.isConnected=t,t?null===(i=this.reconnected)||void 0===i||i.call(this):null===(s=this.disconnected)||void 0===s||s.call(this)),e&&(ht(this,t),pt(this))}setValue(t){if((t=>void 0===t.strings)(this._$Ct))this._$Ct._$AI(t,this);else{const e=[...this._$Ct._$AH];e[this._$Ci]=t,this._$Ct._$AI(e,this,0)}}disconnected(){}reconnected(){}}
/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */class yt{}const $t=new WeakMap,bt=dt(class extends mt{render(t){return N}update(t,[e]){var i;const s=e!==this.U;return s&&void 0!==this.U&&this.ot(void 0),(s||this.rt!==this.lt)&&(this.U=e,this.ht=null===(i=t.options)||void 0===i?void 0:i.host,this.ot(this.lt=t.element)),N}ot(t){var e;if("function"==typeof this.U){const i=null!==(e=this.ht)&&void 0!==e?e:globalThis;let s=$t.get(i);void 0===s&&(s=new WeakMap,$t.set(i,s)),void 0!==s.get(this.U)&&this.U.call(this.ht,void 0),s.set(this.U,t),void 0!==t&&this.U.call(this.ht,t)}else this.U.value=t}get rt(){var t,e,i;return"function"==typeof this.U?null===(e=$t.get(null!==(t=this.ht)&&void 0!==t?t:globalThis))||void 0===e?void 0:e.get(this.U):null===(i=this.U)||void 0===i?void 0:i.value}disconnected(){this.rt===this.lt&&this.ot(void 0)}reconnected(){this.ot(this.lt)}}),_t=dt(class extends ct{constructor(t){var e;if(super(t),t.type!==lt||"style"!==t.name||(null===(e=t.strings)||void 0===e?void 0:e.length)>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(t){return Object.keys(t).reduce(((e,i)=>{const s=t[i];return null==s?e:e+`${i=i.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${s};`}),"")}update(t,[e]){const{style:i}=t.element;if(void 0===this.ct){this.ct=new Set;for(const t in e)this.ct.add(t);return this.render(e)}this.ct.forEach((t=>{null==e[t]&&(this.ct.delete(t),t.includes("-")?i.removeProperty(t):i[t]="")}));for(const t in e){const s=e[t];null!=s&&(this.ct.add(t),t.includes("-")?i.setProperty(t,s):i[t]=s)}return M}}),At={"solarized-dark":{"--planager-pink":"#d33682","--planager-red":"#dc322f","--planager-orange":"#cb4b16","--planager-yellow":"#b58900","--planager-green":"#859900","--planager-cyan":"#2aa198","--planager-blue":"#268bd2","--planager-purple":"#6c71c4","--planager-text-light":"#fdf6e3","--planager-text-dark":"#002b36","--planager-pipe":"#939393","--planager-workspace-background":"#073642","--planager-toolbar":"#002b36","--planager-module-background":"#eee8d5"},dracula:{"--planager-pink":"#ff79c6","--planager-red":"#ff5555","--planager-orange":"#ffad55","--planager-yellow":"#f1fa8c","--planager-green":"#50fa7b","--planager-cyan":"#8be9fd","--planager-blue":"#4395d4","--planager-purple":"#9674c8","--planager-text-light":"#f8f8f2","--planager-text-dark":"#282a36","--planager-pipe":"#b7b7b7","--planager-workspace-background":"#44475a","--planager-toolbar":"#282a36","--planager-module-background":"#f8f8f2"}};
/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */class wt{host;constructor(t){(this.host=t).addController(this)}uploadPlan(t){console.log(t)}downloadPlan(t){this.host.socket.emit("getPlan",(t=>{var e=document.createElement("a");e.setAttribute("href","data:application/json;charset=utf-8, "+JSON.stringify(t)),e.setAttribute("download","plan.json"),document.body.appendChild(e),e.click(),document.body.removeChild(e)}))}}class Ct extends Q{static properties={start:{reflect:!0,type:Object},end:{reflect:!0,type:Object},startparentid:{reflect:!0},startportid:{reflect:!0},endparentid:{reflect:!0},endportid:{reflect:!0},dx:{type:Number},dy:{type:Number},scaleFactor:{type:Number}};static styles=r`:host{display:contents}#pipe{position:fixed;top:0;left:0;height:100%;width:100%}#pipePath{stroke:var(--planager-pipe);stroke-width:3px;fill:none}`;constructor(){super(),this.dx=0,this.dy=0,this.scaleFactor=1,this.startparentid="",this.startportid="",this.endparentid="",this.endportid=""}calculateBezier(){return`M${this.start.x},${this.start.y}\n    C${this.start.x+100},${this.start.y}\n    ${this.end.x-100},${this.end.y}\n    ${this.end.x},${this.end.y}`}render(){return L`<svg id="pipe"><path id="pipePath" d="${this.calculateBezier()}" transform="translate(${this.dx}, ${this.dy})"/></svg>`}}customElements.define("planager-pipe",Ct);class Et{host;loosePipe=null;originPort=null;destinationPort=null;startPipeListener=this.startPipe.bind(this);movePipeListener=this.movePipe.bind(this);closePipeListener=this.closePipe.bind(this);cancelPipeListener=this.cancelPipe.bind(this);constructor(t){(this.host=t).addController(this)}portCenter(t){const e=t.getBoundingClientRect();return{x:e.left+e.width/2,y:e.top+e.height/2}}hostConnected(){addEventListener("port-click",this.startPipeListener)}addLoosePipe(t,e){let i=document.createElement("planager-pipe");return i.start=t,i.end=e,i.slot="undraggable",this.host.appendChild(i),this.host.requestUpdate(),i}addPermanentPipe(t){let e=document.createElement("planager-pipe");"right"===this.originPort.side?(e.start=this.portCenter(this.originPort),e.end=this.portCenter(this.destinationPort)):(e.end=this.portCenter(this.originPort),e.start=this.portCenter(this.destinationPort));let i=t.pipe;return e.startparentid=i.startActionID,e.startportid=i.startPortID,e.endparentid=i.endActionID,e.endportid=i.endPortID,e.slot="undraggable",this.host.appendChild(e),this.host.requestUpdate(),e}startPipe(t){removeEventListener("port-click",this.startPipeListener);const e=t.composedPath()[0],i={x:t.detail.mouseX,y:t.detail.mouseY},s=this.portCenter(e);"right"==e.side?this.loosePipe=this.addLoosePipe(s,i):this.loosePipe=this.addLoosePipe(i,s),this.loosePipe.freeSide=e.side,this.originPort=e,addEventListener("pointermove",this.movePipeListener),addEventListener("port-click",this.closePipeListener),addEventListener("contextmenu",this.cancelPipeListener)}movePipe(t){this.loosePipe&&"canvas"!=this.host.dragType&&("right"==this.loosePipe.freeSide?this.loosePipe.end={x:t.clientX,y:t.clientY}:this.loosePipe.start={x:t.clientX,y:t.clientY},this.host.requestUpdate())}movePipeEnd(t,e,i){"end"===e?t.end={x:t.end.x+i.x,y:t.end.y+i.y}:t.start={x:t.start.x+i.x,y:t.start.y+i.y}}moveAttachedPipes(t,e){const i=this.host.shadowRoot.querySelector("slot[name=undraggable]").assignedElements(),s=i.filter((e=>e.matches(`planager-pipe[startparentid="${t}"]`))),r=i.filter((e=>e.matches(`planager-pipe[endparentid="${t}"]`)));for(const t of s)this.movePipeEnd(t,"start",e);for(const t of r)this.movePipeEnd(t,"end",e)}cancelPipe(t){t.preventDefault(),this.loosePipe.remove(),this.loosePipe=null,this.originPort=null,this.destinationPort=null,removeEventListener("pointermove",this.movePipeListener),removeEventListener("port-click",this.closePipeListener),removeEventListener("contextmenu",this.cancelPipeListener),addEventListener("port-click",this.startPipeListener)}closePipe(t){if(this.destinationPort=t.composedPath()[0],this.destinationPort.side===this.originPort.side)return void this.cancelPipe(t);if(this.destinationPort.parentid===this.originPort.parentid)return void this.cancelPipe(t);let e,i;"right"===this.originPort.side?(e=this.destinationPort,i=this.originPort):(e=this.originPort,i=this.destinationPort),this.host.socket.emit("addPipe",{startActionID:i.parentid,startPortID:i.portid,endActionID:e.parentid,endPortID:e.portid},(e=>{this.addPermanentPipe(e),this.cancelPipe(t)}))}}class kt extends Q{static styles=r`#context-menu{position:absolute;z-index:150;right:0;height:100%}`;render(){return L`<div id="context-menu"><button>add action</button> <button>add action</button> <button>add action</button> <button>add action</button> <button>add action</button></div>`}}customElements.define("planager-context-menu",kt);class Pt extends Q{static styles=r`:host{--grid-size:2rem;--grid-dot-size:1px}canvas{background-size:calc(var(--grid-size) * var(--scaleFactor,1)) calc(var(--grid-size) * var(--scaleFactor,1));background-image:radial-gradient(circle,var(--planager-module-background) var(--grid-dot-size),var(--planager-workspace-background) var(--grid-dot-size));background-position:var(--offset-x,0) var(--offset-y,0);z-index:0;width:100%;height:100%;position:fixed}`;render(){return L`<canvas></canvas>`}}customElements.define("planager-background",Pt);class xt extends Q{pipeController=new Et(this);pointerMap=new Map;static properties={scaleFactor:{type:Number,reflect:!0},viewOffset:{type:Object,reflect:!0},dragType:{type:String,reflect:!0}};constructor(){super(),this.scaleFactor=1,this.viewOffset={x:0,y:0},this.dragType="none"}static styles=r`.full-size{width:100%;height:100%;position:fixed}`;render(){return L`<div id="workspace" class="full-size"><planager-background style="--offset-x:0;--offset-y:0;--scaleFactor:1"></planager-background><div id="undraggable-elements-container"><slot name="undraggable" @slotchange="${this.undraggableSlot}"></slot></div><div id="draggable-elements-container"><slot name="draggable" @slotchange="${this.draggableSlot}"></slot></div><div id="floating-element-container"><slot name="floating" @slotchange="${this.floatingSlot}"></slot></div></div>`}handleDown(t,e){"none"===this.dragType&&(t.preventDefault(),this.dragType=e,t.target.setPointerCapture(t.pointerId),this.pointerMap.set(t.pointerId,{id:t.pointerId,startPos:{x:t.clientX,y:t.clientY},currentPos:{x:t.clientX,y:t.clientY}}))}handleMove(t,e,i){if(this.dragType===e){t.preventDefault();const e=this.pointerMap.get(t.pointerId),s={...e.currentPos};e.currentPos={x:t.clientX,y:t.clientY};i({x:e.currentPos.x-s.x,y:e.currentPos.y-s.y})}}handleUp(t){this.dragType="none",t.target.releasePointerCapture(t.pointerId)}moveBackground(t){let e={};e.x=this.viewOffset.x+t.x*(2-this.scaleFactor),e.y=this.viewOffset.y+t.y*(2-this.scaleFactor),this.viewOffset=e,this.background.style.setProperty("--offset-x",this.viewOffset.x*this.scaleFactor+"px"),this.background.style.setProperty("--offset-y",this.viewOffset.y*this.scaleFactor+"px")}moveElement(t,e){const i=(e,i)=>{const s=t.style.getPropertyValue(e);return s.length>0?parseFloat(s.replace("px","")):i},s=i("--dx",0)+e.x*(2-this.scaleFactor),r=i("--dy",0)+e.y*(2-this.scaleFactor);t.dx=s,t.dy=r,t.style.transform=`translate(${s}px, ${r}px)`,t.style.setProperty("--dx",`${s}px`),t.style.setProperty("--dy",`${r}px`)}get _pinnedElements(){const t=this.shadowRoot.querySelector("slot[name=draggable]").assignedElements({flatten:!0}),e=this.shadowRoot.querySelector("slot[name=undraggable]").assignedElements({flatten:!0});return t.push(...e),t}get _draggable(){return this.shadowRoot.querySelector("slot[name=draggable]").assignedElements({flatten:!0})}get _undraggables(){return this.shadowRoot.querySelector("slot[name=undraggable]").assignedElements({flatten:!0})}draggableSlot(t){const e=t.target.assignedNodes({flatten:!0});let i=0;for(const t of e)if(t instanceof SVGElement||t instanceof HTMLElement){const e=t;e.style.setProperty("--layer",`${i}`),e.style.setProperty("position","fixed"),e.handleDown=t=>{this.handleDown(t,"element")},e.handleMove=t=>{this.handleMove(t,"element",(t=>{this.moveElement(e,t),this.pipeController.moveAttachedPipes(e.info.id,t)}))},i++,this.moveElement(e,{x:0,y:0})}}undraggableSlot(t){const e=t.target.assignedNodes({flatten:!0});let i=0;for(const t of e)if(t instanceof SVGElement||t instanceof HTMLElement){const e=t;e.style.setProperty("--layer",`${i}`),e.style.setProperty("position","fixed"),i++}}floatingSlot(t){const e=t.target.assignedNodes({flatten:!0});let i=0;for(const t of e)if(t instanceof SVGElement||t instanceof HTMLElement){const e=t;e.style.setProperty("--layer",`${i}`),e.style.setProperty("position","fixed"),e.handleDown=t=>{this.handleDown(t,"element")},e.handleMove=t=>{this.handleMove(t,"element",(t=>{this.moveElement(e,t)}))},e.requestUpdate(),i++,this.moveElement(e,{x:0,y:0})}}async firstUpdated(){this.root=this.renderRoot.querySelector("#workspace"),this.background=this.renderRoot.querySelector("planager-background"),this.root.addEventListener("pointerdown",(t=>{this.handleDown(t,"canvas")})),this.root.addEventListener("pointermove",(t=>{this.handleMove(t,"canvas",(t=>{this.moveBackground(t);for(const e of Array.from(this._pinnedElements))(e instanceof SVGElement||e instanceof HTMLElement)&&this.moveElement(e,t)}))})),this.root.addEventListener("pointerup",(t=>{this.handleUp(t)}))}}customElements.define("planager-workspace",xt);const St=L`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path d="M286.3 155.1C287.4 161.9 288 168.9 288 175.1C288 183.1 287.4 190.1 286.3 196.9L308.5 216.7C315.5 223 318.4 232.1 314.7 241.7C312.4 246.1 309.9 252.2 307.1 257.2L304 262.6C300.1 267.6 297.7 272.4 294.2 277.1C288.5 284.7 278.5 287.2 269.5 284.2L241.2 274.9C230.5 283.8 218.3 290.9 205 295.9L198.1 324.9C197 334.2 189.8 341.6 180.4 342.8C173.7 343.6 166.9 344 160 344C153.1 344 146.3 343.6 139.6 342.8C130.2 341.6 122.1 334.2 121 324.9L114.1 295.9C101.7 290.9 89.5 283.8 78.75 274.9L50.53 284.2C41.54 287.2 31.52 284.7 25.82 277.1C22.28 272.4 18.98 267.5 15.94 262.5L12.92 257.2C10.13 252.2 7.592 247 5.324 241.7C1.62 232.1 4.458 223 11.52 216.7L33.7 196.9C32.58 190.1 31.1 183.1 31.1 175.1C31.1 168.9 32.58 161.9 33.7 155.1L11.52 135.3C4.458 128.1 1.62 119 5.324 110.3C7.592 104.1 10.13 99.79 12.91 94.76L15.95 89.51C18.98 84.46 22.28 79.58 25.82 74.89C31.52 67.34 41.54 64.83 50.53 67.79L78.75 77.09C89.5 68.25 101.7 61.13 114.1 56.15L121 27.08C122.1 17.8 130.2 10.37 139.6 9.231C146.3 8.418 153.1 8 160 8C166.9 8 173.7 8.418 180.4 9.23C189.8 10.37 197 17.8 198.1 27.08L205 56.15C218.3 61.13 230.5 68.25 241.2 77.09L269.5 67.79C278.5 64.83 288.5 67.34 294.2 74.89C297.7 79.56 300.1 84.42 304 89.44L307.1 94.83C309.9 99.84 312.4 105 314.7 110.3C318.4 119 315.5 128.1 308.5 135.3L286.3 155.1zM160 127.1C133.5 127.1 112 149.5 112 175.1C112 202.5 133.5 223.1 160 223.1C186.5 223.1 208 202.5 208 175.1C208 149.5 186.5 127.1 160 127.1zM484.9 478.3C478.1 479.4 471.1 480 464 480C456.9 480 449.9 479.4 443.1 478.3L423.3 500.5C416.1 507.5 407 510.4 398.3 506.7C393 504.4 387.8 501.9 382.8 499.1L377.4 496C372.4 492.1 367.6 489.7 362.9 486.2C355.3 480.5 352.8 470.5 355.8 461.5L365.1 433.2C356.2 422.5 349.1 410.3 344.1 397L315.1 390.1C305.8 389 298.4 381.8 297.2 372.4C296.4 365.7 296 358.9 296 352C296 345.1 296.4 338.3 297.2 331.6C298.4 322.2 305.8 314.1 315.1 313L344.1 306.1C349.1 293.7 356.2 281.5 365.1 270.8L355.8 242.5C352.8 233.5 355.3 223.5 362.9 217.8C367.6 214.3 372.5 210.1 377.5 207.9L382.8 204.9C387.8 202.1 392.1 199.6 398.3 197.3C407 193.6 416.1 196.5 423.3 203.5L443.1 225.7C449.9 224.6 456.9 224 464 224C471.1 224 478.1 224.6 484.9 225.7L504.7 203.5C511 196.5 520.1 193.6 529.7 197.3C535 199.6 540.2 202.1 545.2 204.9L550.5 207.9C555.5 210.1 560.4 214.3 565.1 217.8C572.7 223.5 575.2 233.5 572.2 242.5L562.9 270.8C571.8 281.5 578.9 293.7 583.9 306.1L612.9 313C622.2 314.1 629.6 322.2 630.8 331.6C631.6 338.3 632 345.1 632 352C632 358.9 631.6 365.7 630.8 372.4C629.6 381.8 622.2 389 612.9 390.1L583.9 397C578.9 410.3 571.8 422.5 562.9 433.2L572.2 461.5C575.2 470.5 572.7 480.5 565.1 486.2C560.4 489.7 555.6 492.1 550.6 496L545.2 499.1C540.2 501.9 534.1 504.4 529.7 506.7C520.1 510.4 511 507.5 504.7 500.5L484.9 478.3zM512 352C512 325.5 490.5 304 464 304C437.5 304 416 325.5 416 352C416 378.5 437.5 400 464 400C490.5 400 512 378.5 512 352z"/></svg>`,Ot=L`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path d="M144 480C64.47 480 0 415.5 0 336C0 273.2 40.17 219.8 96.2 200.1C96.07 197.4 96 194.7 96 192C96 103.6 167.6 32 256 32C315.3 32 367 64.25 394.7 112.2C409.9 101.1 428.3 96 448 96C501 96 544 138.1 544 192C544 204.2 541.7 215.8 537.6 226.6C596 238.4 640 290.1 640 352C640 422.7 582.7 480 512 480H144zM223 263C213.7 272.4 213.7 287.6 223 296.1C232.4 306.3 247.6 306.3 256.1 296.1L296 257.9V392C296 405.3 306.7 416 320 416C333.3 416 344 405.3 344 392V257.9L383 296.1C392.4 306.3 407.6 306.3 416.1 296.1C426.3 287.6 426.3 272.4 416.1 263L336.1 183C327.6 173.7 312.4 173.7 303 183L223 263z"/></svg>`,Ut=L`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M480 352h-133.5l-45.25 45.25C289.2 409.3 273.1 416 256 416s-33.16-6.656-45.25-18.75L165.5 352H32c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h448c17.67 0 32-14.33 32-32v-96C512 366.3 497.7 352 480 352zM432 456c-13.2 0-24-10.8-24-24c0-13.2 10.8-24 24-24s24 10.8 24 24C456 445.2 445.2 456 432 456zM233.4 374.6C239.6 380.9 247.8 384 256 384s16.38-3.125 22.62-9.375l128-128c12.49-12.5 12.49-32.75 0-45.25c-12.5-12.5-32.76-12.5-45.25 0L288 274.8V32c0-17.67-14.33-32-32-32C238.3 0 224 14.33 224 32v242.8L150.6 201.4c-12.49-12.5-32.75-12.5-45.25 0c-12.49 12.5-12.49 32.75 0 45.25L233.4 374.6z"/></svg>`,Tt=r`.unselectable{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}`;class Lt extends Q{static styles=r`::slotted(svg){fill:var(--planager-text-light);margin:auto;max-height:1rem}:host{cursor:pointer;margin:auto}#icon{display:flex}#icon:hover ::slotted(svg){fill:var(--planager-orange)}`;render(){return L`<span id="icon"><slot></slot></span>`}}customElements.define("planager-toolbar-button",Lt);class Mt extends Q{planController=new wt(this);static styles=[Tt,r`#toolbar{background-color:var(--planager-toolbar);color:var(--planager-text-light);height:2rem;z-index:100;position:sticky;display:flex}#title{font-weight:700;font-size:1rem;margin:auto 1rem;cursor:default}#toolbar planager-toolbar-button{margin-left:.5rem;margin-right:.5rem}`];render(){return L`<div id="toolbar"><span id="title" class="unselectable">Planager</span><planager-toolbar-button @click="${this.planController.downloadPlan}">${Ut}</planager-toolbar-button><planager-toolbar-button @click="${this.planController.uploadPlan}">${Ot}</planager-toolbar-button><planager-toolbar-button>${St}</planager-toolbar-button></div>`}}customElements.define("planager-toolbar",Mt);
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const Nt=(t,e,i)=>{const s=new Map;for(let r=e;r<=i;r++)s.set(t[r],r);return s},zt=dt(class extends ct{constructor(t){if(super(t),t.type!==at)throw Error("repeat() can only be used in text expressions")}dt(t,e,i){let s;void 0===i?i=e:void 0!==e&&(s=e);const r=[],n=[];let o=0;for(const e of t)r[o]=s?s(e,o):o,n[o]=i(e,o),o++;return{values:n,keys:r}}render(t,e,i){return this.dt(t,e,i).values}update(t,[e,i,s]){var r;const n=(t=>t._$AH)(t),{values:o,keys:l}=this.dt(e,i,s);if(!Array.isArray(n))return this.ut=l,o;const a=null!==(r=this.ut)&&void 0!==r?r:this.ut=[],d=[];let c,h,p=0,u=n.length-1,f=0,v=o.length-1;for(;p<=u&&f<=v;)if(null===n[p])p++;else if(null===n[u])u--;else if(a[p]===l[f])d[f]=rt(n[p],o[f]),p++,f++;else if(a[u]===l[v])d[v]=rt(n[u],o[v]),u--,v--;else if(a[p]===l[v])d[v]=rt(n[p],o[v]),st(t,d[v+1],n[p]),p++,v--;else if(a[u]===l[f])d[f]=rt(n[u],o[f]),st(t,n[p],n[u]),u--,f++;else if(void 0===c&&(c=Nt(l,f,v),h=Nt(a,p,u)),c.has(a[p]))if(c.has(a[u])){const e=h.get(l[f]),i=void 0!==e?n[e]:null;if(null===i){const e=st(t,n[p]);rt(e,o[f]),d[f]=e}else d[f]=rt(i,o[f]),st(t,n[p],i),n[e]=null;f++}else ot(n[u]),u--;else ot(n[p]),p++;for(;f<=v;){const e=st(t,d[v+1]);rt(e,o[f]),d[f++]=e}for(;p<=u;){const t=n[p++];null!==t&&ot(t)}return this.ut=l,((t,e=nt)=>{t._$AH=e})(t,d),M}});class Ht extends Q{static properties={side:{reflect:!0},info:{}};constructor(){super(),this.info={}}static styles=r`.port{width:1rem;height:1rem;margin-bottom:.2rem;background-color:var(--planager-pipe);cursor:pointer}.port:hover{filter:invert(.5)}.left{border-radius:50% 0 0 50%}.right{border-radius:0 50% 50% 0}`;handlePortClick(t){const e=new CustomEvent("port-click",{detail:{mouseX:t.pageX,mouseY:t.pageY},bubbles:!0,composed:!0});this.dispatchEvent(e)}render(){return L`<div side="${this.side}" parent-id="${this.info.parentID}" class="${this.side} port" @pointerdown="${this.handlePortClick}" title="${this.info.displayName}"></div>`}}customElements.define("planager-port",Ht);class Dt extends Q{static styles=[Tt,r`#header{background-color:var(--planager-purple);color:var(--planager-text-light);display:flex;cursor:move;padding:.2rem;min-height:.5rem}#title{font-size:.7rem;font-weight:bolder}`];render(){return L`<div id="header" class="unselectable"><span id="title"><slot></slot></span></div>`}}customElements.define("planager-draggable-header",Dt);class Rt extends Q{static properties={socket:{},handleDown:{},handleMove:{},dx:{reflect:!0},dy:{reflect:!0},info:{type:Object}};static styles=r`#module{border:1px solid var(--planager-purple);background-color:var(--planager-module-background);color:var(--planager-text-dark)}#leftPortsContainer{position:absolute;left:-1rem}#rightPortsContainer{position:absolute;right:-1rem}`;constructor(){super(),this.info={}}cancel(t){t.stopPropagation()}render(){return L`<div @pointerdown="${this.cancel}" id="module"><planager-draggable-header color="orange" @pointerdown="${this.handleDown}" @pointermove="${this.handleMove}">${this.info.displayName}</planager-draggable-header><div id="leftPortsContainer">${zt(Object.values(this.info.inports),(t=>t.id),((t,e)=>L`<planager-port side="left" .info="${t}" .portid="${t.id}" .parentid="${t.parentID}"></planager-port>`))}</div><div id="rightPortsContainer">${zt(Object.values(this.info.outports),(t=>t.id),((t,e)=>L`<planager-port side="right" .info="${t}" .portid="${t.id}" .parentid="${t.parentID}"></planager-port>`))}</div><slot></slot></div>`}}customElements.define("planager-module",Rt);class jt extends Q{static properties={dx:{reflect:!0},dy:{reflect:!0},displayName:{reflect:!0}};static styles=r`#pane{background-color:var(--planager-module-background);box-shadow:.2rem .2rem}`;constructor(){super(),this.dx=500,this.dy=500,this.displayName="unnamed"}cancel(t){t.stopPropagation()}render(){return L`<div @pointerdown="${this.cancel}" id="pane"><planager-draggable-header @pointerdown="${this.handleDown}" @pointermove="${this.handleMove}">${this.displayName}</planager-draggable-header><slot></slot></div>`}}customElements.define("planager-pane",jt);class It extends Q{static properties={modules:{}};static styles=r`.action-item{cursor:pointer;font-size:1rem;padding:0 .5rem;color:var(--planager-text-dark)}.action-item:hover{background-color:var(--planager-pink);color:var(--planager-text-light)}`;constructor(){super(),this.modules={}}connectedCallback(){super.connectedCallback(),this.socket.emit("getAvailableActions",(t=>{this.modules=t.actions}))}handleModuleClick(t){this.socket.emit("addAction",{action:t[0],actionSet:t[1].actionSet},(t=>{this.addModule(t)}))}render(){return L`${Object.entries(this.modules).map((t=>L`<div class="action-item" @click="${()=>this.handleModuleClick(t)}">${t[0]}</div>`))}`}}customElements.define("planager-library",It);class Bt extends Q{static styles=[Tt,r`.dropdown{display:inline-block;position:relative}.dropdown-content{display:none;position:absolute;width:100%;overflow:auto;background-color:var(--planager-module-background);outline:1px solid var(--planager-purple)}.dropdown:hover .dropdown-content{display:block}.dropdown-content div{color:#000;padding:.25rem}.dropdown-content div:hover{color:var(--planager-text-light);background-color:var(--planager-blue)}`];render(){return L`<div class="dropdown unselectable">Color Theme<div class="dropdown-content"><div>solarized</div><div>dracula</div><div>solarized</div></div></div>`}}customElements.define("planager-dropdown",Bt);class Vt extends Q{static styles=r``;render(){return L`<planager-dropdown></planager-dropdown>`}}function Ft(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function qt(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Ft(Object(i),!0).forEach((function(e){Kt(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Ft(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function Kt(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Wt(t){return Wt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Wt(t)}function Xt(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Wt(t)););return t}function Yt(){return Yt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var s=Xt(t,e);if(s){var r=Object.getOwnPropertyDescriptor(s,e);return r.get?r.get.call(arguments.length<3?t:i):r.value}},Yt.apply(this,arguments)}function Jt(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}function Zt(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,e);if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t,"string");return"symbol"==typeof e?e:String(e)}function Gt(){Gt=function(){return t};var t={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(t,e){["method","field"].forEach((function(i){e.forEach((function(e){e.kind===i&&"own"===e.placement&&this.defineClassElement(t,e)}),this)}),this)},initializeClassElements:function(t,e){var i=t.prototype;["method","field"].forEach((function(s){e.forEach((function(e){var r=e.placement;if(e.kind===s&&("static"===r||"prototype"===r)){var n="static"===r?t:i;this.defineClassElement(n,e)}}),this)}),this)},defineClassElement:function(t,e){var i=e.descriptor;if("field"===e.kind){var s=e.initializer;i={enumerable:i.enumerable,writable:i.writable,configurable:i.configurable,value:void 0===s?void 0:s.call(t)}}Object.defineProperty(t,e.key,i)},decorateClass:function(t,e){var i=[],s=[],r={static:[],prototype:[],own:[]};if(t.forEach((function(t){this.addElementPlacement(t,r)}),this),t.forEach((function(t){if(!ee(t))return i.push(t);var e=this.decorateElement(t,r);i.push(e.element),i.push.apply(i,e.extras),s.push.apply(s,e.finishers)}),this),!e)return{elements:i,finishers:s};var n=this.decorateConstructor(i,e);return s.push.apply(s,n.finishers),n.finishers=s,n},addElementPlacement:function(t,e,i){var s=e[t.placement];if(!i&&-1!==s.indexOf(t.key))throw new TypeError("Duplicated element ("+t.key+")");s.push(t.key)},decorateElement:function(t,e){for(var i=[],s=[],r=t.decorators,n=r.length-1;n>=0;n--){var o=e[t.placement];o.splice(o.indexOf(t.key),1);var l=this.fromElementDescriptor(t),a=this.toElementFinisherExtras((0,r[n])(l)||l);t=a.element,this.addElementPlacement(t,e),a.finisher&&s.push(a.finisher);var d=a.extras;if(d){for(var c=0;c<d.length;c++)this.addElementPlacement(d[c],e);i.push.apply(i,d)}}return{element:t,finishers:s,extras:i}},decorateConstructor:function(t,e){for(var i=[],s=e.length-1;s>=0;s--){var r=this.fromClassDescriptor(t),n=this.toClassDescriptor((0,e[s])(r)||r);if(void 0!==n.finisher&&i.push(n.finisher),void 0!==n.elements){t=n.elements;for(var o=0;o<t.length-1;o++)for(var l=o+1;l<t.length;l++)if(t[o].key===t[l].key&&t[o].placement===t[l].placement)throw new TypeError("Duplicated element ("+t[o].key+")")}}return{elements:t,finishers:i}},fromElementDescriptor:function(t){var e={kind:t.kind,key:t.key,placement:t.placement,descriptor:t.descriptor};return Object.defineProperty(e,Symbol.toStringTag,{value:"Descriptor",configurable:!0}),"field"===t.kind&&(e.initializer=t.initializer),e},toElementDescriptors:function(t){if(void 0!==t)return function(t){return function(t){if(Array.isArray(t))return t}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Jt(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Jt(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t).map((function(t){var e=this.toElementDescriptor(t);return this.disallowProperty(t,"finisher","An element descriptor"),this.disallowProperty(t,"extras","An element descriptor"),e}),this)},toElementDescriptor:function(t){var e=String(t.kind);if("method"!==e&&"field"!==e)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+e+'"');var i=Zt(t.key),s=String(t.placement);if("static"!==s&&"prototype"!==s&&"own"!==s)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+s+'"');var r=t.descriptor;this.disallowProperty(t,"elements","An element descriptor");var n={kind:e,key:i,placement:s,descriptor:Object.assign({},r)};return"field"!==e?this.disallowProperty(t,"initializer","A method descriptor"):(this.disallowProperty(r,"get","The property descriptor of a field descriptor"),this.disallowProperty(r,"set","The property descriptor of a field descriptor"),this.disallowProperty(r,"value","The property descriptor of a field descriptor"),n.initializer=t.initializer),n},toElementFinisherExtras:function(t){return{element:this.toElementDescriptor(t),finisher:se(t,"finisher"),extras:this.toElementDescriptors(t.extras)}},fromClassDescriptor:function(t){var e={kind:"class",elements:t.map(this.fromElementDescriptor,this)};return Object.defineProperty(e,Symbol.toStringTag,{value:"Descriptor",configurable:!0}),e},toClassDescriptor:function(t){var e=String(t.kind);if("class"!==e)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+e+'"');this.disallowProperty(t,"key","A class descriptor"),this.disallowProperty(t,"placement","A class descriptor"),this.disallowProperty(t,"descriptor","A class descriptor"),this.disallowProperty(t,"initializer","A class descriptor"),this.disallowProperty(t,"extras","A class descriptor");var i=se(t,"finisher");return{elements:this.toElementDescriptors(t.elements),finisher:i}},runClassFinishers:function(t,e){for(var i=0;i<e.length;i++){var s=(0,e[i])(t);if(void 0!==s){if("function"!=typeof s)throw new TypeError("Finishers must return a constructor.");t=s}}return t},disallowProperty:function(t,e,i){if(void 0!==t[e])throw new TypeError(i+" can't have a ."+e+" property.")}};return t}function Qt(t){var e,i=Zt(t.key);"method"===t.kind?e={value:t.value,writable:!0,configurable:!0,enumerable:!1}:"get"===t.kind?e={get:t.value,configurable:!0,enumerable:!1}:"set"===t.kind?e={set:t.value,configurable:!0,enumerable:!1}:"field"===t.kind&&(e={configurable:!0,writable:!0,enumerable:!0});var s={kind:"field"===t.kind?"field":"method",key:i,placement:t.static?"static":"field"===t.kind?"own":"prototype",descriptor:e};return t.decorators&&(s.decorators=t.decorators),"field"===t.kind&&(s.initializer=t.value),s}function te(t,e){void 0!==t.descriptor.get?e.descriptor.get=t.descriptor.get:e.descriptor.set=t.descriptor.set}function ee(t){return t.decorators&&t.decorators.length}function ie(t){return void 0!==t&&!(void 0===t.value&&void 0===t.writable)}function se(t,e){var i=t[e];if(void 0!==i&&"function"!=typeof i)throw new TypeError("Expected '"+e+"' to be a function");return i}
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */customElements.define("planager-settings",Vt);const re=window.ShadowRoot&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,ne=Symbol(),oe=new Map;class le{constructor(t,e){if(this._$cssResult$=!0,e!==ne)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t}get styleSheet(){let t=oe.get(this.cssText);return re&&void 0===t&&(oe.set(this.cssText,t=new CSSStyleSheet),t.replaceSync(this.cssText)),t}toString(){return this.cssText}}const ae=re?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e="";for(const i of t.cssRules)e+=i.cssText;return(t=>new le("string"==typeof t?t:t+"",ne))(e)})(t):t
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */;var de;const ce=window.trustedTypes,he=ce?ce.emptyScript:"",pe=window.reactiveElementPolyfillSupport,ue={toAttribute(t,e){switch(e){case Boolean:t=t?he:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,e){let i=t;switch(e){case Boolean:i=null!==t;break;case Number:i=null===t?null:Number(t);break;case Object:case Array:try{i=JSON.parse(t)}catch(t){i=null}}return i}},fe=(t,e)=>e!==t&&(e==e||t==t),ve={attribute:!0,type:String,converter:ue,reflect:!1,hasChanged:fe};class ge extends HTMLElement{constructor(){super(),this._$Et=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Ei=null,this.o()}static addInitializer(t){var e;null!==(e=this.l)&&void 0!==e||(this.l=[]),this.l.push(t)}static get observedAttributes(){this.finalize();const t=[];return this.elementProperties.forEach(((e,i)=>{const s=this._$Eh(i,e);void 0!==s&&(this._$Eu.set(s,i),t.push(s))})),t}static createProperty(t,e=ve){if(e.state&&(e.attribute=!1),this.finalize(),this.elementProperties.set(t,e),!e.noAccessor&&!this.prototype.hasOwnProperty(t)){const i="symbol"==typeof t?Symbol():"__"+t,s=this.getPropertyDescriptor(t,i,e);void 0!==s&&Object.defineProperty(this.prototype,t,s)}}static getPropertyDescriptor(t,e,i){return{get(){return this[e]},set(s){const r=this[t];this[e]=s,this.requestUpdate(t,r,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)||ve}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const t=Object.getPrototypeOf(this);if(t.finalize(),this.elementProperties=new Map(t.elementProperties),this._$Eu=new Map,this.hasOwnProperty("properties")){const t=this.properties,e=[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)];for(const i of e)this.createProperty(i,t[i])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(t){const e=[];if(Array.isArray(t)){const i=new Set(t.flat(1/0).reverse());for(const t of i)e.unshift(ae(t))}else void 0!==t&&e.push(ae(t));return e}static _$Eh(t,e){const i=e.attribute;return!1===i?void 0:"string"==typeof i?i:"string"==typeof t?t.toLowerCase():void 0}o(){var t;this._$Ep=new Promise((t=>this.enableUpdating=t)),this._$AL=new Map,this._$Em(),this.requestUpdate(),null===(t=this.constructor.l)||void 0===t||t.forEach((t=>t(this)))}addController(t){var e,i;(null!==(e=this._$Eg)&&void 0!==e?e:this._$Eg=[]).push(t),void 0!==this.renderRoot&&this.isConnected&&(null===(i=t.hostConnected)||void 0===i||i.call(t))}removeController(t){var e;null===(e=this._$Eg)||void 0===e||e.splice(this._$Eg.indexOf(t)>>>0,1)}_$Em(){this.constructor.elementProperties.forEach(((t,e)=>{this.hasOwnProperty(e)&&(this._$Et.set(e,this[e]),delete this[e])}))}createRenderRoot(){var t;const e=null!==(t=this.shadowRoot)&&void 0!==t?t:this.attachShadow(this.constructor.shadowRootOptions);return((t,e)=>{re?t.adoptedStyleSheets=e.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet)):e.forEach((e=>{const i=document.createElement("style"),s=window.litNonce;void 0!==s&&i.setAttribute("nonce",s),i.textContent=e.cssText,t.appendChild(i)}))})(e,this.constructor.elementStyles),e}connectedCallback(){var t;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(t=this._$Eg)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostConnected)||void 0===e?void 0:e.call(t)}))}enableUpdating(t){}disconnectedCallback(){var t;null===(t=this._$Eg)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostDisconnected)||void 0===e?void 0:e.call(t)}))}attributeChangedCallback(t,e,i){this._$AK(t,i)}_$ES(t,e,i=ve){var s,r;const n=this.constructor._$Eh(t,i);if(void 0!==n&&!0===i.reflect){const o=(null!==(r=null===(s=i.converter)||void 0===s?void 0:s.toAttribute)&&void 0!==r?r:ue.toAttribute)(e,i.type);this._$Ei=t,null==o?this.removeAttribute(n):this.setAttribute(n,o),this._$Ei=null}}_$AK(t,e){var i,s,r;const n=this.constructor,o=n._$Eu.get(t);if(void 0!==o&&this._$Ei!==o){const t=n.getPropertyOptions(o),l=t.converter,a=null!==(r=null!==(s=null===(i=l)||void 0===i?void 0:i.fromAttribute)&&void 0!==s?s:"function"==typeof l?l:null)&&void 0!==r?r:ue.fromAttribute;this._$Ei=o,this[o]=a(e,t.type),this._$Ei=null}}requestUpdate(t,e,i){let s=!0;void 0!==t&&(((i=i||this.constructor.getPropertyOptions(t)).hasChanged||fe)(this[t],e)?(this._$AL.has(t)||this._$AL.set(t,e),!0===i.reflect&&this._$Ei!==t&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(t,i))):s=!1),!this.isUpdatePending&&s&&(this._$Ep=this._$E_())}async _$E_(){this.isUpdatePending=!0;try{await this._$Ep}catch(t){Promise.reject(t)}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var t;if(!this.isUpdatePending)return;this.hasUpdated,this._$Et&&(this._$Et.forEach(((t,e)=>this[e]=t)),this._$Et=void 0);let e=!1;const i=this._$AL;try{e=this.shouldUpdate(i),e?(this.willUpdate(i),null===(t=this._$Eg)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostUpdate)||void 0===e?void 0:e.call(t)})),this.update(i)):this._$EU()}catch(t){throw e=!1,this._$EU(),t}e&&this._$AE(i)}willUpdate(t){}_$AE(t){var e;null===(e=this._$Eg)||void 0===e||e.forEach((t=>{var e;return null===(e=t.hostUpdated)||void 0===e?void 0:e.call(t)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$Ep}shouldUpdate(t){return!0}update(t){void 0!==this._$EC&&(this._$EC.forEach(((t,e)=>this._$ES(e,this[e],t))),this._$EC=void 0),this._$EU()}updated(t){}firstUpdated(t){}}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var me;ge.finalized=!0,ge.elementProperties=new Map,ge.elementStyles=[],ge.shadowRootOptions={mode:"open"},null==pe||pe({ReactiveElement:ge}),(null!==(de=globalThis.reactiveElementVersions)&&void 0!==de?de:globalThis.reactiveElementVersions=[]).push("1.3.0");const ye=globalThis.trustedTypes,$e=ye?ye.createPolicy("lit-html",{createHTML:t=>t}):void 0,be=`lit$${(Math.random()+"").slice(9)}$`,_e="?"+be,Ae=`<${_e}>`,we=document,Ce=(t="")=>we.createComment(t),Ee=t=>null===t||"object"!=typeof t&&"function"!=typeof t,ke=Array.isArray,Pe=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,xe=/-->/g,Se=/>/g,Oe=/>|[ 	\n\r](?:([^\s"'>=/]+)([ 	\n\r]*=[ 	\n\r]*(?:[^ 	\n\r"'`<>=]|("|')|))|$)/g,Ue=/'/g,Te=/"/g,Le=/^(?:script|style|textarea|title)$/i,Me=(t,...e)=>({_$litType$:1,strings:t,values:e}),Ne=Symbol.for("lit-noChange"),ze=Symbol.for("lit-nothing"),He=new WeakMap,De=we.createTreeWalker(we,129,null,!1);class Re{constructor({strings:t,_$litType$:e},i){let s;this.parts=[];let r=0,n=0;const o=t.length-1,l=this.parts,[a,d]=((t,e)=>{const i=t.length-1,s=[];let r,n=2===e?"<svg>":"",o=Pe;for(let e=0;e<i;e++){const i=t[e];let l,a,d=-1,c=0;for(;c<i.length&&(o.lastIndex=c,a=o.exec(i),null!==a);)c=o.lastIndex,o===Pe?"!--"===a[1]?o=xe:void 0!==a[1]?o=Se:void 0!==a[2]?(Le.test(a[2])&&(r=RegExp("</"+a[2],"g")),o=Oe):void 0!==a[3]&&(o=Oe):o===Oe?">"===a[0]?(o=null!=r?r:Pe,d=-1):void 0===a[1]?d=-2:(d=o.lastIndex-a[2].length,l=a[1],o=void 0===a[3]?Oe:'"'===a[3]?Te:Ue):o===Te||o===Ue?o=Oe:o===xe||o===Se?o=Pe:(o=Oe,r=void 0);const h=o===Oe&&t[e+1].startsWith("/>")?" ":"";n+=o===Pe?i+Ae:d>=0?(s.push(l),i.slice(0,d)+"$lit$"+i.slice(d)+be+h):i+be+(-2===d?(s.push(void 0),e):h)}const l=n+(t[i]||"<?>")+(2===e?"</svg>":"");if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return[void 0!==$e?$e.createHTML(l):l,s]})(t,e);if(this.el=Re.createElement(a,i),De.currentNode=this.el.content,2===e){const t=this.el.content,e=t.firstChild;e.remove(),t.append(...e.childNodes)}for(;null!==(s=De.nextNode())&&l.length<o;){if(1===s.nodeType){if(s.hasAttributes()){const t=[];for(const e of s.getAttributeNames())if(e.endsWith("$lit$")||e.startsWith(be)){const i=d[n++];if(t.push(e),void 0!==i){const t=s.getAttribute(i.toLowerCase()+"$lit$").split(be),e=/([.?@])?(.*)/.exec(i);l.push({type:1,index:r,name:e[2],strings:t,ctor:"."===e[1]?Fe:"?"===e[1]?Ke:"@"===e[1]?We:Ve})}else l.push({type:6,index:r})}for(const e of t)s.removeAttribute(e)}if(Le.test(s.tagName)){const t=s.textContent.split(be),e=t.length-1;if(e>0){s.textContent=ye?ye.emptyScript:"";for(let i=0;i<e;i++)s.append(t[i],Ce()),De.nextNode(),l.push({type:2,index:++r});s.append(t[e],Ce())}}}else if(8===s.nodeType)if(s.data===_e)l.push({type:2,index:r});else{let t=-1;for(;-1!==(t=s.data.indexOf(be,t+1));)l.push({type:7,index:r}),t+=be.length-1}r++}}static createElement(t,e){const i=we.createElement("template");return i.innerHTML=t,i}}function je(t,e,i=t,s){var r,n,o,l;if(e===Ne)return e;let a=void 0!==s?null===(r=i._$Cl)||void 0===r?void 0:r[s]:i._$Cu;const d=Ee(e)?void 0:e._$litDirective$;return(null==a?void 0:a.constructor)!==d&&(null===(n=null==a?void 0:a._$AO)||void 0===n||n.call(a,!1),void 0===d?a=void 0:(a=new d(t),a._$AT(t,i,s)),void 0!==s?(null!==(o=(l=i)._$Cl)&&void 0!==o?o:l._$Cl=[])[s]=a:i._$Cu=a),void 0!==a&&(e=je(t,a._$AS(t,e.values),a,s)),e}class Ie{constructor(t,e){this.v=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}p(t){var e;const{el:{content:i},parts:s}=this._$AD,r=(null!==(e=null==t?void 0:t.creationScope)&&void 0!==e?e:we).importNode(i,!0);De.currentNode=r;let n=De.nextNode(),o=0,l=0,a=s[0];for(;void 0!==a;){if(o===a.index){let e;2===a.type?e=new Be(n,n.nextSibling,this,t):1===a.type?e=new a.ctor(n,a.name,a.strings,this,t):6===a.type&&(e=new Xe(n,this,t)),this.v.push(e),a=s[++l]}o!==(null==a?void 0:a.index)&&(n=De.nextNode(),o++)}return r}m(t){let e=0;for(const i of this.v)void 0!==i&&(void 0!==i.strings?(i._$AI(t,i,e),e+=i.strings.length-2):i._$AI(t[e])),e++}}class Be{constructor(t,e,i,s){var r;this.type=2,this._$AH=ze,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=i,this.options=s,this._$Cg=null===(r=null==s?void 0:s.isConnected)||void 0===r||r}get _$AU(){var t,e;return null!==(e=null===(t=this._$AM)||void 0===t?void 0:t._$AU)&&void 0!==e?e:this._$Cg}get parentNode(){let t=this._$AA.parentNode;const e=this._$AM;return void 0!==e&&11===t.nodeType&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=je(this,t,e),Ee(t)?t===ze||null==t||""===t?(this._$AH!==ze&&this._$AR(),this._$AH=ze):t!==this._$AH&&t!==Ne&&this.$(t):void 0!==t._$litType$?this.T(t):void 0!==t.nodeType?this.k(t):(t=>{var e;return ke(t)||"function"==typeof(null===(e=t)||void 0===e?void 0:e[Symbol.iterator])})(t)?this.S(t):this.$(t)}A(t,e=this._$AB){return this._$AA.parentNode.insertBefore(t,e)}k(t){this._$AH!==t&&(this._$AR(),this._$AH=this.A(t))}$(t){this._$AH!==ze&&Ee(this._$AH)?this._$AA.nextSibling.data=t:this.k(we.createTextNode(t)),this._$AH=t}T(t){var e;const{values:i,_$litType$:s}=t,r="number"==typeof s?this._$AC(t):(void 0===s.el&&(s.el=Re.createElement(s.h,this.options)),s);if((null===(e=this._$AH)||void 0===e?void 0:e._$AD)===r)this._$AH.m(i);else{const t=new Ie(r,this),e=t.p(this.options);t.m(i),this.k(e),this._$AH=t}}_$AC(t){let e=He.get(t.strings);return void 0===e&&He.set(t.strings,e=new Re(t)),e}S(t){ke(this._$AH)||(this._$AH=[],this._$AR());const e=this._$AH;let i,s=0;for(const r of t)s===e.length?e.push(i=new Be(this.A(Ce()),this.A(Ce()),this,this.options)):i=e[s],i._$AI(r),s++;s<e.length&&(this._$AR(i&&i._$AB.nextSibling,s),e.length=s)}_$AR(t=this._$AA.nextSibling,e){var i;for(null===(i=this._$AP)||void 0===i||i.call(this,!1,!0,e);t&&t!==this._$AB;){const e=t.nextSibling;t.remove(),t=e}}setConnected(t){var e;void 0===this._$AM&&(this._$Cg=t,null===(e=this._$AP)||void 0===e||e.call(this,t))}}class Ve{constructor(t,e,i,s,r){this.type=1,this._$AH=ze,this._$AN=void 0,this.element=t,this.name=e,this._$AM=s,this.options=r,i.length>2||""!==i[0]||""!==i[1]?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=ze}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(t,e=this,i,s){const r=this.strings;let n=!1;if(void 0===r)t=je(this,t,e,0),n=!Ee(t)||t!==this._$AH&&t!==Ne,n&&(this._$AH=t);else{const s=t;let o,l;for(t=r[0],o=0;o<r.length-1;o++)l=je(this,s[i+o],e,o),l===Ne&&(l=this._$AH[o]),n||(n=!Ee(l)||l!==this._$AH[o]),l===ze?t=ze:t!==ze&&(t+=(null!=l?l:"")+r[o+1]),this._$AH[o]=l}n&&!s&&this.C(t)}C(t){t===ze?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=t?t:"")}}class Fe extends Ve{constructor(){super(...arguments),this.type=3}C(t){this.element[this.name]=t===ze?void 0:t}}const qe=ye?ye.emptyScript:"";class Ke extends Ve{constructor(){super(...arguments),this.type=4}C(t){t&&t!==ze?this.element.setAttribute(this.name,qe):this.element.removeAttribute(this.name)}}class We extends Ve{constructor(t,e,i,s,r){super(t,e,i,s,r),this.type=5}_$AI(t,e=this){var i;if((t=null!==(i=je(this,t,e,0))&&void 0!==i?i:ze)===Ne)return;const s=this._$AH,r=t===ze&&s!==ze||t.capture!==s.capture||t.once!==s.once||t.passive!==s.passive,n=t!==ze&&(s===ze||r);r&&this.element.removeEventListener(this.name,this,s),n&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var e,i;"function"==typeof this._$AH?this._$AH.call(null!==(i=null===(e=this.options)||void 0===e?void 0:e.host)&&void 0!==i?i:this.element,t):this._$AH.handleEvent(t)}}class Xe{constructor(t,e,i){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(t){je(this,t)}}const Ye=window.litHtmlPolyfillSupport;
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Je,Ze;null==Ye||Ye(Re,Be),(null!==(me=globalThis.litHtmlVersions)&&void 0!==me?me:globalThis.litHtmlVersions=[]).push("2.2.0");class Ge extends ge{constructor(){super(...arguments),this.renderOptions={host:this},this._$Dt=void 0}createRenderRoot(){var t,e;const i=super.createRenderRoot();return null!==(t=(e=this.renderOptions).renderBefore)&&void 0!==t||(e.renderBefore=i.firstChild),i}update(t){const e=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Dt=((t,e,i)=>{var s,r;const n=null!==(s=null==i?void 0:i.renderBefore)&&void 0!==s?s:e;let o=n._$litPart$;if(void 0===o){const t=null!==(r=null==i?void 0:i.renderBefore)&&void 0!==r?r:null;n._$litPart$=o=new Be(e.insertBefore(Ce(),t),t,void 0,null!=i?i:{})}return o._$AI(t),o})(e,this.renderRoot,this.renderOptions)}connectedCallback(){var t;super.connectedCallback(),null===(t=this._$Dt)||void 0===t||t.setConnected(!0)}disconnectedCallback(){var t;super.disconnectedCallback(),null===(t=this._$Dt)||void 0===t||t.setConnected(!1)}render(){return Ne}}Ge.finalized=!0,Ge._$litElement$=!0,null===(Je=globalThis.litElementHydrateSupport)||void 0===Je||Je.call(globalThis,{LitElement:Ge});const Qe=globalThis.litElementPolyfillSupport;null==Qe||Qe({LitElement:Ge}),(null!==(Ze=globalThis.litElementVersions)&&void 0!==Ze?Ze:globalThis.litElementVersions=[]).push("3.2.0");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const ti=(t,e)=>"method"===e.kind&&e.descriptor&&!("value"in e.descriptor)?{...e,finisher(i){i.createProperty(e.key,t)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:e.key,initializer(){"function"==typeof e.initializer&&(this[e.key]=e.initializer.call(this))},finisher(i){i.createProperty(e.key,t)}};function ei(t){return(e,i)=>void 0!==i?((t,e,i)=>{e.constructor.createProperty(i,t)})(t,e,i):ti(t,e)
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */}function ii(t){return ei({...t,state:!0})}
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var si;function ri(t){return null===t?"null":Array.isArray(t)?"array":typeof t}function ni(t){return t!==Object(t)}function oi(t){return!!t&&!!t.nodeType}function li(t){return ni(t)||oi(t)}function ai(t){try{if("string"==typeof t)return JSON.parse(t)}catch(t){console.error(t)}return t}function*di(t){const e=[["",t,[]]];for(;e.length;){const[t,i,s]=e.shift();if(t&&(yield[i,t,s]),!ni(i))for(const[r,n]of Object.entries(i))e.push([`${t}${t?".":""}${r}`,n,[...s,t]])}}null===(si=window.HTMLSlotElement)||void 0===si||si.prototype.assignedElements;const ci=(t,e)=>e instanceof RegExp?!!t.match(e):function(t,e){t=t.split("."),e=e.split(".");const i=t=>"*"===t,s=t=>"**"===t;let r=0,n=0;for(;r<t.length;){const o=e[n];if(o===t[r]||i(o))n++,r++;else{if(!s(o))return!1;n++,r=t.length-(e.length-n)}}return n===e.length}(t,e),hi=(t,e)=>(i,s)=>{const r={};if(t)for(const[i,n,o]of di(s.data))ci(n,t)&&(r[n]=e,o.forEach((t=>r[t]=e)));return{expanded:r}},pi=t=>()=>({highlight:t}),ui=((t,...e)=>{const i=1===t.length?t[0]:e.reduce(((e,i,s)=>e+(t=>{if(!0===t._$cssResult$)return t.cssText;if("number"==typeof t)return t;throw Error("Value passed to 'css' function must be a 'css' function result: "+t+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+t[s+1]),t[0]);return new le(i,ne)})`:host{--background-color:#2a2f3a;--color:#f8f8f2;--string-color:#a3eea0;--number-color:#d19a66;--boolean-color:#4ba7ef;--null-color:#df9cf3;--property-color:#6fb3d2;--preview-color:rgba(222,175,143,0.9);--highlight-color:#7b0000;--font-family:monaco,Consolas,'Lucida Console',monospace;--font-size:1rem;--indent-size:1.5em;--indentguide-size:1px;--indentguide-style:solid;--indentguide-color:#333;--indentguide-color-active:#666;--indentguide:var(--indentguide-size) var(--indentguide-style) var(--indentguide-color);--indentguide-active:var(--indentguide-size) var(--indentguide-style) var(--indentguide-color-active);display:block;background-color:var(--background-color);color:var(--color);font-family:var(--font-family);font-size:var(--font-size)}.preview{color:var(--preview-color)}.null{color:var(--null-color)}.key{color:var(--property-color);display:inline-block}.collapsable:before{display:inline-block;color:var(--color);font-size:.8em;content:'▶';line-height:1em;width:1em;height:1em;text-align:center;transition:transform 195ms ease-out;transform:rotate(90deg);color:var(--property-color)}.collapsable.collapsableCollapsed:before{transform:rotate(0)}.collapsable{cursor:pointer;user-select:none}.string{color:var(--string-color)}.number{color:var(--number-color)}.boolean{color:var(--boolean-color)}ul{padding:0;clear:both}li,ul{list-style:none;position:relative}li ul>li{position:relative;margin-left:var(--indent-size);padding-left:0}ul ul:before{content:'';border-left:var(--indentguide);position:absolute;left:calc(.5em - var(--indentguide-size));top:.3em;bottom:.3em}ul ul:hover:before{border-left:var(--indentguide-active)}mark{background-color:var(--highlight-color)}`;let fi,vi,gi,mi,yi,$i,bi,_i=t=>t,Ai=function(t,e,i,s){var r=Gt(),n=e((function(t){r.initializeInstanceElements(t,o.elements)}),i),o=r.decorateClass(function(t){for(var e=[],i=function(t){return"method"===t.kind&&t.key===n.key&&t.placement===n.placement},s=0;s<t.length;s++){var r,n=t[s];if("method"===n.kind&&(r=e.find(i)))if(ie(n.descriptor)||ie(r.descriptor)){if(ee(n)||ee(r))throw new ReferenceError("Duplicated methods ("+n.key+") can't be decorated.");r.descriptor=n.descriptor}else{if(ee(n)){if(ee(r))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+n.key+").");r.decorators=n.decorators}te(n,r)}else e.push(n)}return e}(n.d.map(Qt)),null);return r.initializeClassElements(n.F,o.elements),r.runClassFinishers(n.F,o.finishers)}(0,(function(t,e){class i extends e{constructor(...e){super(...e),t(this)}}return{F:i,d:[{kind:"field",decorators:[ei({converter:ai,type:Object})],key:"data",value:()=>null},{kind:"field",decorators:[ii()],key:"state",value:()=>({expanded:{},filtered:{},highlight:null})},{kind:"get",static:!0,key:"styles",value:function(){return[ui]}},{kind:"get",static:!0,key:"is",value:function(){return"json-viewer"}},{kind:"method",key:"setState",value:async function(t,e){this.state=qt(qt({},this.state),"function"==typeof t?t(this.state,this):t),this.updateComplete.then(e)}},{kind:"method",key:"connectedCallback",value:function(){this.hasAttribute("data")||this.setAttribute("data",this.innerText),Yt(Wt(i.prototype),"connectedCallback",this).call(this)}},{kind:"field",key:"handlePropertyClick",value(){return t=>e=>{e.preventDefault(),this.setState(((t,e)=>e=>({expanded:qt(qt({},e.expanded),{},{[t]:!e.expanded[t]})}))(t))}}},{kind:"method",key:"expand",value:function(t,e){this.setState(hi(t,!0),e)}},{kind:"method",key:"expandAll",value:function(){this.setState(hi("**",!0))}},{kind:"method",key:"collapseAll",value:function(){this.setState(hi("**",!1))}},{kind:"method",key:"collapse",value:function(t){this.setState(hi(t,!1))}},{kind:"method",key:"search",value:function*(t){for(const[e,i,s]of di(this.data))li(e)&&String(e).includes(t)&&(this.expand(i,(()=>{const t=this.renderRoot.querySelector(`[data-path="${i}"]`);t.scrollIntoView({behavior:"smooth",inline:"center",block:"center"}),t.focus()})),this.setState(pi(i)),yield{value:e,path:i});this.setState(pi(null))}},{kind:"method",key:"filter",value:function(t){var e;this.setState((e=t,(t,i)=>{const s={};if(e)for(const[t,r,n]of di(i.data))ci(r,e)?(s[r]=!1,n.forEach((t=>s[t]=!1))):s[r]=!0;return{filtered:s}}))}},{kind:"method",key:"resetFilter",value:function(){this.setState({filtered:{}})}},{kind:"method",key:"renderObject",value:function(t,e){return Me(fi||(fi=_i`<ul>${0}</ul>`),Object.keys(t).map((i=>{const s=t[i],r=e?`${e}.${i}`:i,n=li(s),o=this.state.expanded[r]||n;return Me(vi||(vi=_i`<li data-path="${0}" .hidden="${0}">${0} ${0}</li>`),r,this.state.filtered[r],this.renderPropertyKey({isCollapsable:!n,collapsed:!this.state.expanded[r],key:i,onClick:this.handlePropertyClick(r)}),o?this.renderNode(s,r):this.renderNodePreview(s))})))}},{kind:"method",key:"renderNode",value:function(t,e=""){return li(t)?this.renderValue(t,e):this.renderObject(t,e)}},{kind:"method",key:"renderNodePreview",value:function(t){return Me(gi||(gi=_i`<span class="preview">${0}</span>`),function(t,e){const{nodeCount:i,maxLength:s}=qt({nodeCount:3,maxLength:15},void 0),r=Array.isArray(t),n=Object.keys(t),o=n.slice(0,i),l=[r?"[ ":"{ "],a=[];for(const e of o){const i=[],n=t[e],o=ri(n);r||i.push(`${e}: `),"object"===o?i.push(0===Object.keys(n).length?"{ }":"{ ... }"):"array"===o?i.push(0===n.length?"[ ]":"[ ... ]"):"string"===o?i.push(`"${n.substring(0,s)}${n.length>s?"...":""}"`):i.push(String(n)),a.push(i.join(""))}return n.length>i&&a.push("..."),l.push(a.join(", ")),l.push(r?" ]":" }"),l.join("")}(t))}},{kind:"method",key:"renderPropertyKey",value:function({isCollapsable:t,collapsed:e,onClick:i,key:s}){return Me(mi||(mi=_i`<span class="${0}" @click="${0}">${0}:</span>`),function(...t){return t.filter(Boolean).join(" ")}(s&&"key",t&&"collapsable",e&&"collapsableCollapsed"),t?i:null,s)}},{kind:"method",key:"renderValue",value:function(t,e){const i=this.state.highlight,s=oi(t)?t:Me(yi||(yi=_i`<span tabindex="0" class="${0}">${0}</span>`),ri(t),JSON.stringify(t));return null!==i&&e===i?Me($i||($i=_i`<mark>${0}</mark>`),s):s}},{kind:"method",key:"render",value:function(){return Me(bi||(bi=_i`${0}`),this.renderNode(this.data))}}]}}),Ge);customElements.define("json-viewer",Ai);class wi extends Q{static properties={plan:{type:Object}};static styles=r`#viewer{min-width:10rem;padding:.5rem;overflow:auto}json-viewer{--string-color:var(--planager-green);--number-color:var(--planager-orange);--boolean-color:var(--planager-blue);--null-color:var(--planager-purple);--property-color:var(--planager-cyan)}`;constructor(){super(),this.plan={}}connectedCallback(){super.connectedCallback(),this.socket.emit("getPlan",(t=>{this.plan=t,this.viewer.data=this.plan,this.requestUpdate()})),this.socket.on("planUpdate",(t=>{this.plan=t,this.viewer.data=this.plan,this.requestUpdate()}))}firstUpdated(){this.viewer=this.renderRoot.querySelector("json-viewer");const t=r`ul{margin:0;max-height:30rem;max-width:30rem}`;n(this.viewer.shadowRoot,[t])}render(){return L`<json-viewer id="viewer">{}</json-viewer>`}}customElements.define("plan-viewer",wi);class Ci extends Q{canvasRef=(()=>new yt)();planController=new wt(this);currentOffset={x:100,y:100};static properties={socket:{},modules:{},theme:{}};constructor(){super(),this.modules=[],this.socket=io.connect("http://localhost:8000/"),this.socket.emit("newPlan"),this.theme="dracula"}handleKeyDown(t){let e=String.fromCharCode(t.which).toLowerCase();(t.ctrlKey||t.metaKey)&&"s"===e?(t.preventDefault(),this.planController.downloadPlan(t)):(t.ctrlKey||t.metaKey)&&"c"===e?(t.preventDefault(),console.log("CTRL+C Pressed")):(t.ctrlKey||t.metaKey)&&"v"===e?(t.preventDefault(),console.log("CTRL+V Pressed")):(t.ctrlKey||t.metaKey)&&"z"===e&&(t.preventDefault(),console.log("CTRL+Z pressed"))}connectedCallback(){super.connectedCallback(),addEventListener("keydown",this.handleKeyDown.bind(this))}increaseOffset(){this.currentOffset.x+=10,this.currentOffset.y+=10}async handleNewModule(t){const e=("planager-"+t.actionType.slice(1).join("-")).toLowerCase();if(!customElements.get(e)){const i=`../../${t.actionType.join("/")}.js`;let s=await import(i);customElements.define(e,s.default)}let i=document.createElement("planager-module");i.slot="draggable",i.info=t,i.style.setProperty("--dx",this.currentOffset.x),i.style.setProperty("--dy",this.currentOffset.y),this.increaseOffset();let s=document.createElement(e);s.socket=this.socket,s.info=t,i.appendChild(s),this.canvasRef.value.appendChild(i),this.requestUpdate()}render(){return L`<main style="${_t(At[this.theme])}"><planager-toolbar .socket="${this.socket}"></planager-toolbar><planager-workspace ${bt(this.canvasRef)} .socket="${this.socket}"><planager-pane slot="floating" displayName="Settings" style="--dx:700;--dy:300"><planager-settings></planager-settings></planager-pane><planager-pane slot="floating" displayName="Plan Viewer" style="--dx:700;--dy:500"><plan-viewer .socket="${this.socket}"></plan-viewer></planager-pane><planager-pane slot="floating" displayName="Tool Library" style="--dx:700;--dy:0"><planager-library .socket="${this.socket}" .addModule="${this.handleNewModule.bind(this)}"></planager-library></planager-pane></planager-workspace></main>`}}customElements.define("planager-root",Ci);export{Ci as PlanagerRoot};
